<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="head.title"></title>
    <link rel="stylesheet" href="/styles/style.css" />
    <script type="module" src="/src/locales/translations.js"></script>
    <script
      src="https://kit.fontawesome.com/70455eaf31.js"
      crossorigin="anonymous"
      defer
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;300;400&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap"
      rel="stylesheet"
    />

    <!-----------------------------components----------------------------->
    <!-----------------------------Menu cmponent----------------------------->
    <script type="module" src="src/components/MenuComponent.js"></script>
    <!-----------------------------Language component----------------------------->
    <script type="module">
      import {
        initLanguage,
        saveLanguage,
      } from "./src/components/SaveLanguageInCookiesComponent.js";

      window.changeLang = (lang) => {
        saveLanguage(lang);
      };

      window.addEventListener("DOMContentLoaded", () => {
        initLanguage();
      });
    </script>
    <!-----------------------------Contact component----------------------------->
    <script
      type="module"
      src="/src/components/contactFormComponent.js"
    ></script>
    <!-----------------------------Footer component----------------------------->
    <script type="module" src="/src/components/FooterComponent.js"></script>
  </head>
  <!-----------------------------Popup img----------------------------->
  <body>
    <div id="image-popup" class="popup">
      <span class="close">&times;</span>
      <img
        class="popup-content"
        id="popup-img"
        alt="Fullscreen image"
        loading="lazy"
      />
      <div class="popup-nav">
        <span id="prev" class="nav-arrow"
          ><i class="fa-solid fa-arrow-left"></i
        ></span>
        <span id="next" class="nav-arrow"
          ><i class="fa-solid fa-arrow-right"></i
        ></span>
      </div>
    </div>
    <!-----------------------------Header----------------------------->
    <div id="header">
      <div class="container">
        <!-----------------------------Menu----------------------------->
        <menu-component></menu-component>

        <!-----------------------------Header Text----------------------------->
        <div class="header-text">
          <h1 data-i18n="header.hi"></h1>
          <h2 data-i18n="header.marketing_automation"></h2>
          <h2 data-i18n="header.photographer"></h2>
          <h2 data-i18n="header.programmer"></h2>
        </div>
      </div>
    </div>
    <!-----------------------------About----------------------------->

    <div id="about">
      <div class="container">
        <div class="row">
          <div class="about-col-1 animate">
            <img
              src="https://oscarbergstrom.netlify.app/src/assets/profile.png"
              alt="Profile picture Oscar Bergstrom"
              loading="lazy"
            />
          </div>
          <div class="about-col-2">
            <h1 class="sub-title animate" data-i18n="about.title"></h1>
            <p class="sub-p animate" data-i18n="about.short_description"></p>
            <div class="tab-title animate">
              <h3
                class="tab-links animate active-link"
                onclick="opentab('skills')"
                data-i18n="tabs.skills.title"
              >
                Skills
              </h3>
              <h3
                class="tab-links animate"
                onclick="opentab('experience')"
                data-i18n="tabs.experience.title"
              >
                Experience
              </h3>
              <h3
                class="tab-links animate"
                onclick="opentab('education')"
                data-i18n="tabs.education.title"
              >
                Education
              </h3>
            </div>
            <div class="tab-contents active-tab" id="skills">
              <ul>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.photographer"></h4>
                  <br />
                  <p data-i18n="tabs.skills.photographer_description"></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.designer"></h4>
                  <br />
                  <p data-i18n="tabs.skills.designer_description"></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.app_developer"></h4>
                  <br />
                  <p data-i18n="tabs.skills.app_developer_description"></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.video"></h4>
                  <br />
                  <p data-i18n="tabs.skills.video_description"></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.drone_pilot"></h4>
                  <br />
                  <p data-i18n="tabs.skills.drone_pilot_description"></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.skills.SEO"></h4>
                  <br />
                  <p data-i18n="tabs.skills.SEO_description"></p>
                </li>
              </ul>
            </div>
            <div class="tab-contents" id="experience">
              <ul>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.experience.software_developer"></h4>
                  <br />
                  <p
                    data-i18n="tabs.experience.software_developer_description"
                  ></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.experience.marketing_automation"></h4>
                  <br />
                  <p
                    data-i18n="tabs.experience.marketing_automation_description"
                  ></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.experience.photographer"></h4>
                  <br />
                  <p data-i18n="tabs.experience.photographer_description"></p>
                </li>
              </ul>
            </div>
            <div class="tab-contents" id="education">
              <ul>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.education.linneuniversitetet"></h4>
                  <br />
                  <p
                    data-i18n="tabs.education.linneuniversitetet_description"
                  ></p>
                </li>
                <li class="tab-content-li animate">
                  <h4 data-i18n="tabs.education.medieinstitutet"></h4>
                  <br />
                  <p data-i18n="tabs.education.medieinstitutet_description"></p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-----------------------------Services----------------------------->

    <div id="services">
      <div class="container">
        <h1 class="sub-title animate" data-i18n="services.title"></h1>
        <div class="services-list">
          <div class="services-list-item animate">
            <i class="fa-solid fa-chart-simple"></i>
            <h2 data-i18n="services.marketing.title"></h2>
            <p data-i18n="services.marketing.description"></p>
            <a href="#" data-i18n="services.learn_more"></a>
          </div>
          <div class="services-list-item animate">
            <i class="fa-solid fa-code"></i>
            <h2 data-i18n="services.webdesign.title"></h2>
            <p data-i18n="services.webdesign.description"></p>
            <a href="#" data-i18n="services.learn_more"></a>
          </div>
          <div class="services-list-item animate">
            <i class="fa-solid fa-camera"></i>
            <h2 data-i18n="services.photography.title"></h2>
            <p data-i18n="services.photography.description"></p>
            <a href="#" data-i18n="services.learn_more"></a>
          </div>
        </div>
      </div>
    </div>
    <!-----------------------------Portfolio----------------------------->
    <div id="portfolio">
      <div class="container">
        <h1 class="sub-title animate" data-i18n="portfolio.title"></h1>
        <div class="work-list" id="work-list"></div>
        <button class="btn animate" data-i18n="portfolio.see_more"></button>
      </div>
    </div>
    <!-----------------------------Contact----------------------------->
    <contact-form-component></contact-form-component>
    <footer-component></footer-component>
    <!-----------------------------Script----------------------------->
    <!-----------------------------Active tab----------------------------->
    <script>
      var tablinks = document.getElementsByClassName("tab-links");
      var tabcontents = document.getElementsByClassName("tab-contents");

      function opentab(tabname) {
        for (tablink of tablinks) {
          tablink.classList.remove("active-link");
        }
        for (tabcontent of tabcontents) {
          tabcontent.classList.remove("active-tab");
        }
        event.currentTarget.classList.add("active-link");
        document.getElementById(tabname).classList.add("active-tab");
      }
    </script>
    <!-----------------------------Img Sizes----------------------------->
    <script>
      const imageNames = [
        "Castle.jpg",
        "SandDunes.jpg",
        "Shore.jpg",
        "ForeverForest.JPG",
        "BeachwavesLeft.JPG",
        "BlueWater.jpg",
        "BushesAndTrails.jpg",
        "EndlessForest.JPG",
        "JettyWithboats.jpg",
        "Lillypads.JPG",
        "MistyIsland.JPG",
        "Mountains.JPG",
        "ShoreWithBushes.jpg",
        "SomethingInTheBush.JPG",
        "SothernHills.JPG",
        "TurqoseWater.jpg",
      ];

      const container = document.getElementById("work-list");
      const seeMoreBtn = document.querySelector(
        '.btn[data-i18n="portfolio.see_more"]'
      );

      let visibleImagesCount = 9;

      function displayImages(count) {
        container.innerHTML = "";
        imageNames.slice(0, count).forEach((name) => {
          const title = name
            .replace(/\.[^/.]+$/, "")
            .replace(/([A-Z])/g, " $1")
            .replace(/^\s/, "")
            .trim();

          const imagePath = `https://oscarbergstrom.netlify.app/src/assets/`;
          const html = `
            <div class="work animate">
                <img 
                    src="${imagePath}size250/${name}" 
                    alt="${title}" 
                    loading="lazy" 
                    data-name="${name}"
                    srcset="
                        ${imagePath}size250/${name} 300w, 
                        ${imagePath}size400/${name} 600w, 
                        ${imagePath}size800/${name} 1000w,
                        ${imagePath}sizeOriginal/${name} 2250w"
                    sizes="(max-width: 300px) 250px, (max-width: 600px) 400px, (max-width: 1000px) 800px, (max-width: 2250px) 2250px" >
                
            </div>
        `;
          container.innerHTML += html;
        });
      }

      seeMoreBtn.addEventListener("click", () => {
        visibleImagesCount = imageNames.length;
        displayImages(visibleImagesCount);
        seeMoreBtn.style.display = "none";
      });

      displayImages(visibleImagesCount);
    </script>
    <!-----------------------------Popup img----------------------------->
    <script>
      const popup = document.getElementById("image-popup");
      const popupImg = document.getElementById("popup-img");
      const closeBtn = document.querySelector(".popup .close");
      const nextBtn = document.getElementById("next");
      const prevBtn = document.getElementById("prev");

      function getAllImages() {
        return Array.from(document.querySelectorAll("#work-list img"));
      }
      let currentIndex = 0;

      function showImage(index) {
        const allImages = getAllImages();
        if (index < 0) index = allImages.length - 1;
        if (index >= allImages.length) index = 0;
        currentIndex = index;
        const img = allImages[currentIndex];
        const originalName = img.getAttribute("data-name");
        popupImg.src = `https://oscarbergstrom.netlify.app/src/assets/sizeOriginal/${originalName}`;
        popupImg.alt = img.alt;
        popup.style.display = "block";
      }

      document.addEventListener("click", function (e) {
        const allImages = getAllImages();
        const layer = e.target.closest(".work");
        if (layer) {
          const workImg = layer.closest(".work").querySelector("img");

          currentIndex = allImages.findIndex((img) => img.src === workImg.src);
          showImage(currentIndex);
        }
      });

      closeBtn.addEventListener("click", () => (popup.style.display = "none"));

      popup.addEventListener("click", (e) => {
        if (e.target === popup) popup.style.display = "none";
      });

      nextBtn.addEventListener("click", () => showImage(currentIndex + 1));
      prevBtn.addEventListener("click", () => showImage(currentIndex - 1));

      document.addEventListener("keydown", (e) => {
        if (popup.style.display === "block") {
          if (e.key === "ArrowRight") showImage(currentIndex + 1);
          if (e.key === "ArrowLeft") showImage(currentIndex - 1);
          if (e.key === "Escape") popup.style.display = "none";
        }
      });
    </script>
    <!-----------------------------Animate----------------------------->
    <script>
      function animateElements(selector, options = {}) {
        const elements = document.querySelectorAll(selector);
        const {
          delayOnLoad = null,
          delayOnVisible = 0.5,
          rootMargin = "0px",
          threshold = 0.1,
        } = options;

        const handleIntersection = (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("animate-visible");
              observer.unobserve(entry.target);
            }
          });
        };

        const observer = new IntersectionObserver(handleIntersection, {
          rootMargin,
          threshold,
        });

        elements.forEach((el, index) => {
          el.classList.add("animate-item");

          if (delayOnLoad !== null) {
            setTimeout(() => {
              el.style.animationDelay = `${delayOnLoad + index * 0.2}s`; // Exempel på sekventiell delay
              el.classList.add("animate-visible");
            }, delayOnLoad * 1000);
          } else {
            observer.observe(el);
          }
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        animateElements("#about .about-col-1.animate", { delayOnVisible: 0.4 });
        animateElements("#about .sub-title.animate", { delayOnVisible: 0.8 });
        animateElements("#about .sub-p.animate", { delayOnVisible: 1 });
        animateElements("#about .tab-links.animate", { delayOnLoad: 0.2 });
        animateElements("#about .tab-content-li.animate", { delayOnLoad: 0.4 });

        animateElements("#services .sub-title.animate", { delayOnLoad: 0.4 });
        animateElements("#services .services-list-item.animate", {
          delayOnLoad: 0.8,
        });

        animateElements("#portfolio .sub-title.animate", { delayOnLoad: 0.2 });
        animateElements("#portfolio .work.animate", { delayOnLoad: 0.4 });
        animateElements("#portfolio .btn.animate", { delayOnLoad: 0.8 });
      });
    </script>
  </body>
</html>
