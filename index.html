<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="head.title"></title>
    <link rel="stylesheet" href="/styles/style.css" />
    <script type="module" src="/src/locales/translations.js"></script>
    <script
      src="https://kit.fontawesome.com/70455eaf31.js"
      crossorigin="anonymous"
      defer
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;300;400&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap"
      rel="stylesheet"
    />

    <!-----------------------------components----------------------------->
    <!-----------------------------Cookie consent----------------------------->
    <script type="module" src="/src/components/cookie-consent.js"></script>
    <!-----------------------------Popup Image component----------------------------->
    <script type="module" src="/src/components/ImagePopupComponent.js"></script>
    <!-----------------------------Menu component----------------------------->
    <script type="module" src="/src/components/MenuComponent.js"></script>
    <!-----------------------------Language component----------------------------->
    <script type="module">
      import {
        initLanguage,
        saveLanguage,
      } from "./src/components/SaveLanguageInCookiesComponent.js";

      window.changeLang = (lang) => {
        saveLanguage(lang);
      };

      window.addEventListener("DOMContentLoaded", () => {
        initLanguage();
      });
    </script>
    <!-----------------------------Tabs component----------------------------->
    <script type="module" src="/src/components/TabsComponent.js"></script>
    <!-----------------------------Services component----------------------------->
    <script type="module" src="/src/components/ServicesComponents.js"></script>
    <!-----------------------------Contact component----------------------------->
    <script
      type="module"
      src="/src/components/contactFormComponent.js"
    ></script>
    <!-----------------------------Footer component----------------------------->
    <script type="module" src="/src/components/FooterComponent.js"></script>
  </head>
  <body>
    <!-----------------------------Cookie consent----------------------------->
    <cookie-consent></cookie-consent>
    <!-----------------------------Popup img----------------------------->
    <image-popup-component></image-popup-component>
    <!-----------------------------Header----------------------------->
    <div id="header">
      <div class="container">
        <!-----------------------------Menu----------------------------->
        <menu-component></menu-component>
        <!-----------------------------Header Text----------------------------->
        <div class="header-text">
          <h1 data-i18n="header.hi"></h1>
          <h2 data-i18n="header.marketing_automation"></h2>
          <h2 data-i18n="header.photographer"></h2>
          <h2 data-i18n="header.programmer"></h2>
        </div>
      </div>
    </div>
    <!-----------------------------About----------------------------->
    <tabs-component></tabs-component>
    <!-----------------------------Services----------------------------->
    <services-component></services-component>
    <!-----------------------------Portfolio----------------------------->
    <div id="portfolio">
      <div class="container">
        <h1 class="sub-title animate" data-i18n="portfolio.title"></h1>
        <div class="work-list" id="work-list"></div>
        <a
          href="src/pages/portfolio/portfolio.html"
          class="btn animate"
          data-i18n="portfolio.see_more"
        ></a>
      </div>
    </div>
    <!-----------------------------Contact----------------------------->
    <contact-form-component></contact-form-component>
    <footer-component></footer-component>
    <!-----------------------------Script----------------------------->
    <!-----------------------------Img Sizes----------------------------->
    <script>
      const imageNames = [
        "Castle.jpg",
        "SandDunes.jpg",
        "Shore.jpg",
        "ForeverForest.JPG",
        "BeachwavesLeft.JPG",
        "BlueWater.jpg",
        "BushesAndTrails.jpg",
        "EndlessForest.JPG",
        "JettyWithboats.jpg",
        "Lillypads.JPG",
        "MistyIsland.JPG",
        "Mountains.JPG",
        "ShoreWithBushes.jpg",
        "SomethingInTheBush.JPG",
        "SothernHills.JPG",
        "TurqoseWater.jpg",
      ];

      const container = document.getElementById("work-list");
      const seeMoreBtn = document.querySelector(
        '.btn[data-i18n="portfolio.see_more"]'
      );

      let visibleImagesCount = 9;

      function displayImages(count) {
        container.innerHTML = "";
        imageNames.slice(0, count).forEach((name) => {
          const title = name
            .replace(/\.[^/.]+$/, "")
            .replace(/([A-Z])/g, " $1")
            .replace(/^\s/, "")
            .trim();

          const imagePath = `https://oscarbergstrom.netlify.app/src/assets/`;
          const html = `
            <div class="work animate">
                <img 
                    src="${imagePath}size250/${name}" 
                    alt="${title}" 
                    loading="lazy" 
                    data-name="${name}"
                    srcset="
                        ${imagePath}size250/${name} 300w, 
                        ${imagePath}size400/${name} 600w, 
                        ${imagePath}size800/${name} 1000w,
                        ${imagePath}sizeOriginal/${name} 2250w"
                    sizes="(max-width: 300px) 250px, (max-width: 600px) 400px, (max-width: 1000px) 800px, (max-width: 2250px) 2250px" >
                
            </div>
        `;
          container.innerHTML += html;
        });
      }

      displayImages(visibleImagesCount);
    </script>
    <!-----------------------------Animate----------------------------->
    <script>
      function animateElements(selector, options = {}) {
        const elements = document.querySelectorAll(selector);
        const {
          delayOnLoad = null,
          delayOnVisible = 0.5,
          rootMargin = "0px",
          threshold = 0.1,
        } = options;

        const handleIntersection = (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("animate-visible");
              observer.unobserve(entry.target);
            }
          });
        };

        const observer = new IntersectionObserver(handleIntersection, {
          rootMargin,
          threshold,
        });

        elements.forEach((el, index) => {
          el.classList.add("animate-item");

          if (delayOnLoad !== null) {
            setTimeout(() => {
              el.style.animationDelay = `${delayOnLoad + index * 0.2}s`; // Exempel pÃ¥ sekventiell delay
              el.classList.add("animate-visible");
            }, delayOnLoad * 1000);
          } else {
            observer.observe(el);
          }
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        animateElements("#about .about-col-1.animate", { delayOnVisible: 0.4 });
        animateElements("#about .sub-title.animate", { delayOnVisible: 0.8 });
        animateElements("#about .sub-p.animate", { delayOnVisible: 1 });
        animateElements("#about .tab-links.animate", { delayOnLoad: 0.2 });
        animateElements("#about .tab-content-li.animate", { delayOnLoad: 0.4 });

        animateElements("#services .sub-title.animate", { delayOnLoad: 0.4 });
        animateElements("#services .services-list-item.animate", {
          delayOnLoad: 0.8,
        });

        animateElements("#portfolio .sub-title.animate", { delayOnLoad: 0.2 });
        animateElements("#portfolio .work.animate", { delayOnLoad: 0.4 });
        animateElements("#portfolio .btn.animate", { delayOnLoad: 0.8 });
      });
    </script>
  </body>
</html>
